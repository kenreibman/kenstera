---
phase: 04-form-ui
plan: "02"
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - app/page.tsx
autonomous: false
requirements: [INFR-03, UX-01, UX-02, UX-03, UX-04]

must_haves:
  truths:
    - "DemoForm section appears on the homepage between CRM Integrations and Case Studies"
    - "Visitor sees the form on the live dev server at the correct position on the page"
    - "Form fields are visible on the dark background with high contrast"
    - "Submitting the form (with test reCAPTCHA key) shows loading then success state"
  artifacts:
    - path: "app/page.tsx"
      provides: "DemoForm import and placement between CRMIntegrations and CaseStudies"
      contains: "DemoForm"
  key_links:
    - from: "app/page.tsx"
      to: "components/sections/DemoForm.tsx"
      via: "import and JSX render"
      pattern: "import.*DemoForm.*from.*components/sections/DemoForm"
---

<objective>
Insert the DemoForm section component into the homepage at the correct position (between CRM Integrations and Case Studies) and visually verify the complete form UI in the browser.

Purpose: Completes INFR-03 (homepage placement) and validates that all form states look and behave correctly through human verification.
Output: DemoForm rendered on the homepage, verified by user.
</objective>

<execution_context>
@C:/Users/DESKTOP/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/DESKTOP/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-form-ui/04-CONTEXT.md
@.planning/phases/04-form-ui/04-01-SUMMARY.md

@app/page.tsx
@components/sections/DemoForm.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Insert DemoForm into homepage between CRMIntegrations and CaseStudies</name>
  <files>
    app/page.tsx
  </files>
  <action>
1. Add import to `app/page.tsx`:
   ```typescript
   import { DemoForm } from "@/components/sections/DemoForm";
   ```

2. Insert `<DemoForm />` in the JSX between `<CRMIntegrations />` and `<CaseStudies />`:
   ```tsx
   <CRMIntegrations />
   <DemoForm />
   <CaseStudies />
   ```

3. Do not modify any other part of page.tsx. page.tsx remains a server component — DemoForm has its own 'use client' directive.

4. Run `npm run build` to confirm the full page compiles.
  </action>
  <verify>
    Run `npm run build` — must exit 0.
    Confirm page.tsx imports DemoForm and renders it between CRMIntegrations and CaseStudies.
  </verify>
  <done>
    DemoForm is imported and rendered in the correct homepage position. Build passes.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify DemoForm UI on live dev server</name>
  <files>app/page.tsx</files>
  <action>
Human verification of the complete demo form section integrated into the homepage.

What was built:
- Dark navy (#00122e) full-width section between CRM Integrations and Case Studies
- Two-column layout: headline + explainer on the left, form fields on the right
- Three input fields (name, phone, email) with white backgrounds on dark section
- Phone auto-formatting as (XXX) XXX-XXXX
- Submit button "Get a call" with loading spinner on submit
- Success state with checkmark, "Your call is on its way" message, and "Book a sales call" CTA
- Error states for rate limit, validation, and generic API failures
- reCAPTCHA v3 invisible verification

Steps to verify:
1. Start dev server: `npm run dev`
2. Open http://localhost:3000 in browser
3. Scroll down — confirm the dark navy section appears between CRM Integrations and Case Studies sections
4. Check desktop layout: headline/explainer on left, form on right (two columns)
5. Check mobile layout: headline above form (stacked single column)
6. Type in phone field — confirm auto-formatting: digits format as (XXX) XXX-XXXX
7. Try submitting with empty fields — confirm inline validation errors appear
8. Fill all fields with valid data and submit:
   - If NEXT_PUBLIC_RECAPTCHA_SITE_KEY is set (use test key 6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI paired with secret key 6LeIxAcTAAAAAGG-vFI1TnRWxMZNFuojJ4WifJWe):
     - Button should show spinner and disable
     - Form should transition to success state with checkmark
   - If no reCAPTCHA key set: the submit will likely fail with an error — verify the error state displays correctly
9. Confirm "Book a sales call" CTA in success state links to /contact-sales
10. Confirm consent text "By submitting, you agree to receive an AI-powered phone call" appears below submit button

Resume signal: Type "approved" to complete Phase 4, or describe any visual/functional issues to fix.
  </action>
  <verify>User visually confirms form renders correctly in browser at http://localhost:3000 and all states work as described.</verify>
  <done>User approves the DemoForm visual and functional behavior on the live dev server.</done>
</task>

</tasks>

<verification>
1. `npm run build` passes
2. Homepage renders DemoForm between CRM Integrations and Case Studies
3. Form is visually correct: dark background, white inputs, proper spacing
4. Phone auto-format works
5. Form state transitions work (idle -> submitting -> success/error)
6. User has visually confirmed the form in a browser
</verification>

<success_criteria>
- DemoForm appears on homepage in correct position (between CRMIntegrations and CaseStudies)
- Visual design matches CONTEXT.md locked decisions: dark navy background, white inputs, two-column desktop layout
- All form states verified by user in browser
- User approves the visual and functional result
</success_criteria>

<output>
After completion, create `.planning/phases/04-form-ui/04-02-SUMMARY.md`
</output>
